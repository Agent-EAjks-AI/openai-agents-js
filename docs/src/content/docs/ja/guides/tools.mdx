---
title: ツール
description: Provide your agents with capabilities via hosted tools or custom function tools
---

import { Code } from '@astrojs/starlight/components';
import toolsFunctionExample from '../../../../../../examples/docs/tools/functionTools.ts?raw';
import toolsHostedToolsExample from '../../../../../../examples/docs/tools/hostedTools.ts?raw';
import nonStrictSchemaTools from '../../../../../../examples/docs/tools/nonStrictSchemaTools.ts?raw';
import agentsAsToolsExample from '../../../../../../examples/docs/tools/agentsAsTools.ts?raw';
import mcpLocalServer from '../../../../../../examples/docs/tools/mcpLocalServer.ts?raw';

ツールを使うと、エージェントは **行動を取る** ことができます。データ取得、外部 API 呼び出し、コード実行、さらにはコンピュータの使用も可能です。JavaScript/TypeScript SDK は次の 4 つのカテゴリーをサポートします:

1. **組み込みツール（Hosted）** – OpenAI のサーバー上でモデルと並行して実行します（Web 検索、ファイル検索、コンピュータ操作、Code Interpreter、画像生成）
2. **関数ツール** – 任意のローカル関数を JSON Schema でラップし、LLM が呼び出せるようにします
3. **エージェントをツールとして** – エージェント全体を呼び出し可能なツールとして公開します
4. **ローカル MCP サーバー** – ローカルで動作する Model context protocol サーバーを接続します

---

## 1. 組み込みツール（Hosted）

`OpenAIResponsesModel` を使用すると、次の組み込みツールを追加できます:

| ツール                    | Type 文字列          | 目的                                                |
| ------------------------- | -------------------- | --------------------------------------------------- |
| Web 検索                  | `'web_search'`       | インターネット検索                                  |
| ファイル/リトリーバル検索 | `'file_search'`      | OpenAI 上でホストされる ベクトルストア に問い合わせ |
| コンピュータ操作          | `'computer'`         | GUI 操作の自動化                                    |
| Code Interpreter          | `'code_interpreter'` | サンドボックス環境でコードを実行                    |
| 画像生成                  | `'image_generation'` | テキストに基づく画像生成                            |

<Code lang="typescript" code={toolsHostedToolsExample} title="Hosted tools" />

正確なパラメーターは OpenAI Responses API と一致します。`rankingOptions` やセマンティックフィルターなどの高度なオプションは公式ドキュメントを参照してください。

---

## 2. 関数ツール

`tool()` ヘルパーで、**あらゆる** 関数をツールにできます。

<Code
  lang="typescript"
  code={toolsFunctionExample}
  title="Function tool with Zod parameters"
/>

### オプションリファレンス

| フィールド      | 必須   | 説明                                                                                                                                                                                                   |
| --------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `name`          | いいえ | デフォルトは関数名（例: `get_weather`）                                                                                                                                                                |
| `description`   | はい   | LLM に示される、明確で読みやすい説明                                                                                                                                                                   |
| `parameters`    | はい   | Zod スキーマ、または 元 の JSON Schema オブジェクトのいずれか。Zod の parameters を使うと自動的に **strict** モードが有効になります                                                                    |
| `strict`        | いいえ | `true`（デフォルト）の場合、引数が検証に失敗すると SDK はモデルエラーを返します。あいまいなマッチングを許可するには `false` に設定します                                                               |
| `execute`       | はい   | `(args, context) => string                                                                                               \| Promise<string>`– ビジネスロジック。2 つ目の引数は任意で `RunContext` です |
| `errorFunction` | いいえ | 内部エラーをユーザー向けの文字列に変換するためのカスタムハンドラー `(context, error) => string`                                                                                                        |

### 非 strict モードの JSON スキーマ ツール

無効または一部のみの入力でもモデルに「推測」させたい場合は、元 の JSON Schema を使う際に strict モードを無効化できます:

<Code
  lang="typescript"
  code={nonStrictSchemaTools}
  title="Non-strict JSON schema tools"
/>

---

## 3. エージェントをツールとして

会話を完全にハンドオフせずに、別のエージェントを補助として使いたい場合があります。`agent.asTool()` を使います:

<Code lang="typescript" code={agentsAsToolsExample} title="Agents as tools" />

SDK の内部動作:

- 単一の `input` パラメーターを持つ関数ツールを作成
- ツール呼び出し時にその入力でサブエージェントを実行
- 最後のメッセージ、または `customOutputExtractor` で抽出した出力を返却

エージェントをツールとして実行すると、Agents SDK はデフォルト設定で Runner を作成し、関数実行内でその Runner を使ってエージェントを実行します。`runConfig` や `runOptions` のプロパティを指定したい場合は、`asTool()` メソッドに渡して Runner の挙動をカスタマイズできます。

---

## 4. MCP サーバー

[Model Context Protocol (MCP)](https://modelcontextprotocol.io/) サーバー経由でツールを公開し、エージェントに接続できます。たとえば、`MCPServerStdio` を使って stdio MCP サーバーを起動・接続できます:

<Code lang="typescript" code={mcpLocalServer} title="Local MCP server" />

完全な例は [`filesystem-example.ts`](https://github.com/openai/openai-agents-js/tree/main/examples/mcp/filesystem-example.ts) を参照してください。MCP サーバーツール統合の包括的なガイドを探している場合は、[MCP 連携](/openai-agents-js/ja/guides/mcp) を参照してください。

---

## ツール使用の挙動

モデルがいつ、どのようにツールを使用すべきか（`tool_choice`、`toolUseBehavior` など）の制御は、[エージェント](/openai-agents-js/ja/guides/agents#forcing-tool-use) を参照してください。

---

## ベストプラクティス

- **短く明確な説明** – ツールが何をするか、いつ使うかを記述
- **入力を検証** – 可能な限り Zod スキーマで厳密な JSON 検証を実施
- **エラーハンドラーで副作用を避ける** – `errorFunction` は有用な文字列を返し、例外は投げない
- **ツールは単一責任** – 小さく合成可能なツールほどモデルの推論が向上

---

## 次のステップ

- [ツール使用の強制](/openai-agents-js/ja/guides/agents#forcing-tool-use) について学ぶ
- ツールの入力や出力を検証する [ガードレール](/openai-agents-js/ja/guides/guardrails) を追加
- [`tool()`](/openai-agents-js/openai/agents/functions/tool) と各種組み込みツールタイプの TypeDoc リファレンスを読む
