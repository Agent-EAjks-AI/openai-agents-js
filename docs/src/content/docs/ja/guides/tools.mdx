---
title: ツール
description: Provide your agents with capabilities via hosted tools or custom function tools
---

import { Code } from '@astrojs/starlight/components';
import toolsFunctionExample from '../../../../../../examples/docs/tools/functionTools.ts?raw';
import toolsHostedToolsExample from '../../../../../../examples/docs/tools/hostedTools.ts?raw';
import nonStrictSchemaTools from '../../../../../../examples/docs/tools/nonStrictSchemaTools.ts?raw';
import agentsAsToolsExample from '../../../../../../examples/docs/tools/agentsAsTools.ts?raw';
import mcpLocalServer from '../../../../../../examples/docs/tools/mcpLocalServer.ts?raw';

ツールは エージェント が **アクションを実行** できるようにします – データの取得、外部 API の呼び出し、コードの実行、さらには コンピュータ操作 まで。JavaScript/TypeScript SDK は 4 つの カテゴリー をサポートします:

1. **組み込みツール（Hosted）** – モデルと同じ OpenAI のサーバー上で動作します。_(Web 検索、ファイル検索、コンピュータ操作、Code Interpreter、画像生成)_
2. **関数ツール** – 任意のローカル関数を JSON スキーマでラップし、LLM が呼び出せるようにします。
3. **ツールとしてのエージェント** – エージェント 全体を呼び出し可能なツールとして公開します。
4. **ローカルMCPサーバー** – 手元のマシンで動作する Model Context Protocol サーバーを接続します。

---

## 1. 組み込みツール（Hosted）

`OpenAIResponsesModel` を使用する場合、次の組み込みツールを追加できます:

| ツール                  | タイプ文字列         | 目的                                            |
| ----------------------- | -------------------- | ----------------------------------------------- |
| Web search              | `'web_search'`       | インターネット検索                              |
| File / retrieval search | `'file_search'`      | OpenAI でホストされている ベクトルストア を検索 |
| Computer use            | `'computer'`         | GUI 操作を自動化                                |
| Code Interpreter        | `'code_interpreter'` | サンドボックス環境でコードを実行                |
| Image generation        | `'image_generation'` | テキストに基づいて画像を生成                    |

<Code
  lang="typescript"
  code={toolsHostedToolsExample}
  title="組み込みツール（Hosted）"
/>

正確なパラメーターセットは OpenAI Responses API と一致します。`rankingOptions` やセマンティックフィルターなどの高度なオプションについては公式ドキュメントを参照してください。

---

## 2. 関数ツール

ヘルパー `tool()` を使うと、任意の関数をツールにできます。

<Code
  lang="typescript"
  code={toolsFunctionExample}
  title="Zod パラメーター付きの関数ツール"
/>

### オプションのリファレンス

| フィールド      | 必須 | 説明                                                                                                                                                                                                            |
| --------------- | ---- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`          | No   | 関数名（例: `get_weather`）をデフォルトとして使用                                                                                                                                                               |
| `description`   | Yes  | LLM に表示される明確で人が読める説明                                                                                                                                                                            |
| `parameters`    | Yes  | Zod スキーマまたは 元 JSON スキーマオブジェクトのいずれか。Zod パラメーターでは自動的に **strict** モードが有効に                                                                                               |
| `strict`        | No   | `true`（デフォルト）の場合、引数が検証に失敗すると SDK はモデルエラーを返します。あいまいなマッチングを許すには `false` に設定                                                                                  |
| `execute`       | Yes  | `(args, context) => string                                                                                               \| Promise<string>`– あなたのビジネスロジック。省略可能な第 2 引数は `RunContext` です |
| `errorFunction` | No   | 内部エラーをユーザーに見える文字列へ変換するためのカスタムハンドラー `(context, error) => string`                                                                                                               |

### strict でない JSON スキーマのツール

不正または不完全な入力をモデルに推測させたい場合は、元 JSON スキーマを使う際に strict モードを無効化できます:

<Code
  lang="typescript"
  code={nonStrictSchemaTools}
  title="Non-strict JSON schema tools"
/>

---

## 3. ツールとしてのエージェント

会話を完全に ハンドオフ せずに、ある エージェント が別の エージェント を支援してほしい場合があります。`agent.asTool()` を使います:

<Code lang="typescript" code={agentsAsToolsExample} title="Agents as tools" />

内部的には、SDK は次を行います:

- 単一の `input` パラメーターを持つ 関数ツール を作成
- ツールが呼ばれたときに、その入力でサブエージェントを実行
- 最後のメッセージ、または `customOutputExtractor` により抽出された出力を返却

---

## 4. ローカルMCPサーバー

ローカルの [Model Context Protocol](https://modelcontextprotocol.io/) サーバー経由でツールを公開し、エージェント に接続できます。`MCPServerStdio` を使ってサーバーを起動し、接続します:

<Code lang="typescript" code={mcpLocalServer} title="Local MCP server" />

完全な code examples は [`filesystem-example.ts`](https://github.com/openai/openai-agents-js/tree/main/examples/mcp/filesystem-example.ts) を参照してください。

---

## ツール使用の動作

モデルがいつどのようにツールを使用すべきか（`tool_choice`、`toolUseBehavior` など）を制御する方法は、[エージェント](/openai-agents-js/ja/guides/agents#forcing-tool-use) を参照してください。

---

## ベストプラクティス

- **短く明確な説明** – ツールが何をするか、いつ使うべきかを記述
- **入力の検証** – 可能なら Zod スキーマで厳密な JSON 検証を行う
- **エラーハンドラーでの副作用を避ける** – `errorFunction` は例外を投げず、有用な文字列を返すべき
- **1 ツール 1 責務** – 小さく合成しやすいツールはモデルの推論を改善

---

## 次のステップ

- [ツール使用の強制](/openai-agents-js/ja/guides/agents#forcing-tool-use) について学ぶ
- ツールの入力や出力を検証するために [ガードレール](/openai-agents-js/ja/guides/guardrails) を追加
- 各種 組み込みツール（Hosted） タイプと [`tool()`](/openai-agents-js/openai/agents/functions/tool) の TypeDoc リファレンスを参照
